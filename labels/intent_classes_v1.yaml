# SPDX-FileCopyrightText: 2025 OmniNode.ai Inc.
# SPDX-License-Identifier: MIT
---
# Intent Classes Label Store - Version 1
#
# This file is the versioned label store for the adaptive-classifier-based
# intent classification handler. New classes are added via PR review to this
# file, not via runtime API calls. The classifier_version field must reflect
# this file's version.
#
# Format:
#   version: <semver string>
#   classes:
#     <LABEL>:
#       description: <human-readable description>
#       examples: <list of labeled example texts>
#
# Rules:
#   - Each class must have at least 3 examples (R1: enough for centroid bootstrap)
#   - Examples must be representative and diverse
#   - Labels must match EnumIntentClass values exactly (SCREAMING_SNAKE_CASE)
#   - Version bump required when examples are added/removed
#
# Reference: OMN-2735 — Adopt adaptive-classifier as 8-class intent handler

version: "1.0.0"

classes:
  REFACTOR:
    description: >-
      Code refactoring, quality improvement, restructuring, cleanup, naming conventions, module reorganization
      without changing behavior.
    examples:
      - "Refactor the authentication module to reduce cyclomatic complexity"
      - "Rename variables for clarity and follow PEP 8 conventions"
      - "Extract common logic into a shared utility function"
      - "Restructure the service layer to separate concerns"
      - "Clean up dead code and remove unused imports"
      - "Simplify nested conditionals in the payment handler"
      - "Move helper functions to a dedicated utils module"

  BUGFIX:
    description: >-
      Bug fixing, error resolution, crash recovery, patching incorrect behavior, fixing regressions, resolving
      test failures.
    examples:
      - "Fix the null pointer exception when user session expires"
      - "Resolve the race condition in the worker pool initialization"
      - "Correct the off-by-one error in pagination logic"
      - "Patch the broken retry logic that ignores transient failures"
      - "Fix memory leak in the WebSocket connection handler"
      - "Debug why the config loader silently ignores missing keys"
      - "The integration test is failing intermittently — investigate and fix"

  FEATURE:
    description: >-
      New feature development, capability addition, implementing new functionality, adding new endpoints
      or services.
    examples:
      - "Add a new REST endpoint for user preference management"
      - "Implement OAuth2 PKCE flow for mobile authentication"
      - "Create a background job to send daily digest emails"
      - "Build the CSV export functionality for audit reports"
      - "Add support for multi-tenant workspaces"
      - "Implement real-time notifications using WebSockets"
      - "Write a new plugin for Slack integration"

  ANALYSIS:
    description: >-
      Code review, investigation, evaluation, read-only analysis, feasibility studies, performance profiling,
      explaining existing behavior.
    examples:
      - "Review the current database query patterns for bottlenecks"
      - "Analyze the impact of upgrading to Python 3.12"
      - "Investigate why the API latency increased after the last deployment"
      - "Profile the memory usage of the inference pipeline"
      - "Evaluate trade-offs between Redis and Valkey for session storage"
      - "Explain how the routing algorithm currently works"
      - "Assess the test coverage gaps in the authentication module"

  CONFIGURATION:
    description: >-
      Configuration changes, environment settings, schema updates, settings management, environment variable
      adjustments, deployment configs.
    examples:
      - "Update the Kafka consumer group timeout configuration"
      - "Add the new QDRANT_URL environment variable to all service configs"
      - "Adjust the rate limiting thresholds in the API gateway config"
      - "Configure the logging level for production deployments"
      - "Update the Docker Compose service resource limits"
      - "Set the correct SSL certificate paths in the Nginx config"
      - "Add the missing feature flag for the new payment provider"

  DOCUMENTATION:
    description: >-
      Writing documentation, README files, docstrings, API guides, comments, architecture decision records,
      changelogs, runbooks.
    examples:
      - "Write the README for the new omniintelligence service"
      - "Add docstrings to all public methods in the classifier module"
      - "Update the API reference with the new authentication endpoints"
      - "Create an architecture decision record for the event bus choice"
      - "Document the runbook for handling Kafka consumer lag alerts"
      - "Add inline comments explaining the TF-IDF scoring algorithm"
      - "Update the CHANGELOG with all changes since the last release"

  MIGRATION:
    description: >-
      Database migrations, data transformations, schema migrations, data model changes, Alembic migrations,
      data backfills, schema versioning.
    examples:
      - "Create Alembic migration to add the user_preferences table"
      - "Backfill the missing correlation_id column in the audit_log table"
      - "Migrate the legacy session format to the new JWT-based schema"
      - "Write the data transformation script for the v2 event format"
      - "Add index on agent_actions.correlation_id for query performance"
      - "Drop the deprecated legacy_sessions table after migration window"
      - "Version the Kafka event schema from v1 to v2 with backward compat"

  SECURITY:
    description: >-
      Security audits, authentication, authorization, encryption, permission changes, vulnerability patching,
      secret rotation, least-privilege review.
    examples:
      - "Audit the API endpoints for missing authentication checks"
      - "Rotate the Kafka SSL certificates before expiry"
      - "Fix the SQL injection vulnerability in the search handler"
      - "Add input sanitization to prevent XSS in the dashboard"
      - "Review permissions on the S3 bucket for least-privilege compliance"
      - "Implement rate limiting to prevent credential stuffing attacks"
      - "Patch the dependency with the known CVE in the crypto library"
