# Incremental Tree Stamping Git Hook Configuration
#
# This file configures the pre-commit hook for incremental stamping.
# The hook triggers async stamping for changed files without blocking commits.
#
# Created: 2025-10-27
# Usage: Automatically loaded by scripts/git_hooks/incremental_stamp.py

# ==============================================================================
# Core Settings
# ==============================================================================

# Enable/disable incremental stamping
# Set to false to temporarily disable without uninstalling hook
enabled: true

# Async mode (non-blocking)
# true: Publish event and return immediately (<2s)
# false: Wait for stamping to complete (not recommended, slow)
async_mode: true

# Minimum files to trigger stamping
# Skip stamping if fewer files changed (performance optimization)
min_files_for_stamping: 1

# Maximum files per event
# Large commits are batched to prevent overwhelming the system
max_files_per_event: 100

# Hook execution timeout (seconds)
# Hook will be terminated if it exceeds this time
timeout_seconds: 2.0

# ==============================================================================
# Project Configuration
# ==============================================================================

# Project name (slug identifier)
# Auto-detected from git remote or directory name if not specified
project_name: null  # null = auto-detect

# ==============================================================================
# Kafka Event Bus Configuration
# ==============================================================================

# Enable Kafka event publishing
# IMPORTANT: Set to true only when Redpanda/Kafka is running
# Default: false (safe for installations without Kafka)
kafka_enabled: false

# Kafka bootstrap servers
# Use 192.168.86.200:9092 for host machine access to Docker Redpanda
# Use omninode-bridge-redpanda:9092 for Docker-to-Docker communication
kafka_bootstrap_servers: "192.168.86.200:9092"

# Kafka topic for incremental stamp requests
kafka_topic: "dev.archon-intelligence.tree.incremental-stamp-requested.v1"

# ==============================================================================
# File Filtering
# ==============================================================================

# Exclude patterns (glob-style)
# Files matching these patterns will not be stamped
exclude_patterns:
  # Python
  - "*.pyc"
  - "*.pyo"
  - "__pycache__/*"
  - "*.egg-info/*"

  # Version control
  - ".git/*"
  - ".svn/*"
  - ".hg/*"

  # Dependencies
  - "node_modules/*"
  - ".venv/*"
  - "venv/*"
  - "env/*"

  # Build artifacts
  - "dist/*"
  - "build/*"
  - "target/*"
  - "out/*"
  - "bin/*"
  - "obj/*"

  # Minified/bundled files
  - "*.min.js"
  - "*.min.css"
  - "*.bundle.js"
  - "*.chunk.js"
  - "*.map"

  # Cache directories (Python, Node.js, testing)
  - ".cache/*"
  - ".pytest_cache/*"
  - ".mypy_cache/*"
  - ".ruff_cache/*"
  - ".tox/*"
  - ".next/*"
  - ".nuxt/*"
  - ".turbo/*"

  # IDE
  - ".idea/*"
  - ".vscode/*"
  - ".vs/*"

  # Logs and temp
  - "*.log"
  - "tmp/*"
  - "temp/*"

# Supported file extensions
# Only files with these extensions will be stamped
supported_extensions:
  # Python
  - ".py"
  - ".pyi"

  # JavaScript/TypeScript
  - ".js"
  - ".jsx"
  - ".ts"
  - ".tsx"

  # Java/Kotlin
  - ".java"
  - ".kt"

  # Rust
  - ".rs"

  # Go
  - ".go"

  # Ruby
  - ".rb"

  # PHP
  - ".php"

  # C/C++
  - ".c"
  - ".h"
  - ".cpp"
  - ".hpp"
  - ".cc"
  - ".cxx"

  # C#
  - ".cs"

  # Swift
  - ".swift"

  # Scala
  - ".scala"

  # Clojure
  - ".clj"

  # Elixir
  - ".ex"
  - ".exs"

  # Erlang
  - ".erl"
  - ".hrl"

  # R
  - ".r"
  - ".R"

  # SQL
  - ".sql"

  # Shell
  - ".sh"
  - ".bash"
  - ".zsh"
  - ".fish"

  # YAML
  - ".yaml"
  - ".yml"

  # JSON
  - ".json"

  # TOML
  - ".toml"

  # Markdown
  - ".md"
  - ".markdown"

  # reStructuredText
  - ".rst"

  # Protobuf
  - ".proto"

  # GraphQL
  - ".graphql"
  - ".gql"

  # Vue/Svelte
  - ".vue"
  - ".svelte"

# ==============================================================================
# Performance Tuning
# ==============================================================================

# Additional performance settings can be added here
# For example:
# - Parallel processing options
# - Rate limiting
# - Resource constraints
