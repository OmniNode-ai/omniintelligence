# Bridge Service Configuration

# Core Service Configuration
BRIDGE_SERVICE_PORT=8054
ENVIRONMENT=development

# Database Configuration
MEMGRAPH_URI=bolt://memgraph:7687

# Intelligence Service
INTELLIGENCE_SERVICE_URL=http://archon-intelligence:8053

# Intelligence Enrichment Control (Short-term fix for timeout issues)
# Set to 'true' to bypass intelligence service calls and index documents directly
# Set to 'false' to use full intelligence enrichment (default)
SKIP_INTELLIGENCE_ENRICHMENT=false

# Async Intelligence Enrichment (Phase 2.1)
# Set to 'true' to enable async enrichment via Kafka
# Set to 'false' to disable async enrichment (default)
ENABLE_ASYNC_ENRICHMENT=false

# Kafka Configuration (for async enrichment)
KAFKA_BOOTSTRAP_SERVERS=omninode-bridge-redpanda:9092
KAFKA_ENRICHMENT_TOPIC=dev.archon-intelligence.enrich-document.v1

# CORS Configuration (comma-separated origins)
# Development default: http://localhost:3737,http://localhost:8181
# Production: Set to specific domains (never use *)
CORS_ALLOWED_ORIGINS=http://localhost:3737,http://localhost:8181

# ============================================================
# HTTP/2 Connection Pooling Configuration (Phase 1 Performance)
# Target: 30-50% latency reduction vs basic httpx clients
# ============================================================

# Connection Pool Settings
HTTP_MAX_CONNECTIONS=100           # Maximum total connections
HTTP_MAX_KEEPALIVE=20             # Maximum keepalive connections
HTTP_KEEPALIVE_EXPIRY=30          # Keepalive expiry in seconds

# Timeout Configuration (seconds)
HTTP_CONNECT_TIMEOUT=5.0          # Connection timeout
HTTP_READ_TIMEOUT=10.0            # Read timeout
HTTP_WRITE_TIMEOUT=5.0            # Write timeout
HTTP_POOL_TIMEOUT=5.0             # Pool timeout

# Retry Configuration (exponential backoff)
HTTP_MAX_RETRIES=3                # Maximum retry attempts
HTTP_RETRY_BACKOFF=1.0            # Backoff factor (1s, 2s, 4s)

# ============================================================
# Notes:
# - HTTP/2 connection pooling reduces latency by reusing connections
# - Keepalive connections improve performance for repeated requests
# - Timeouts prevent hanging on slow/unresponsive services
# - Retry logic with exponential backoff improves reliability
# ============================================================
