# pytest configuration for Phase 5 Intelligence Features
[pytest]
minversion = 7.0
testpaths = tests
python_files = test_*.py
python_classes = Test*
python_functions = test_*
asyncio_mode = auto

# Add root, src, tests, and models to Python path
pythonpath = . src tests models

# Output options
addopts =
    -v
    --tb=short
    --color=yes

# Markers for test categories
markers =
    unit: Unit tests
    integration: Integration tests
    e2e: End-to-end workflow tests
    phase5: Phase 5 Intelligence Features tests
    pattern_learning: Pattern learning tests
    quality_intelligence: Quality intelligence tests
    performance_intelligence: Performance intelligence tests
    performance_analytics: Performance Analytics API tests
    slow: Slow running tests
    error_handling: Error handling tests
    performance: Performance benchmarking tests
    autonomous: Autonomous learning tests
    custom_rules: Custom quality rules tests
    freshness: Document freshness tests
    knowledge_graph: Knowledge graph tests
    phase4_traceability: Phase 4 traceability tests
    requires_kafka: Tests requiring Kafka
    handler_tests: Handler integration tests
    wave5: Wave 5 feature tests
    wave6: Wave 6 feature tests
    wave8: Wave 8 feature tests
    benchmark: Benchmark tests
    stale_documents: Tests for stale document detection
    document_refresh: Tests for document refresh feature
    event_ingestion: Tests for event ingestion
    event_stats: Tests for event statistics
    analyses_list: Tests for analyses list endpoint
    cleanup: Tests for cleanup operations
    freshness_stats: Tests for freshness statistics
    single_document: Tests for single document operations

# Test Marker Usage Examples:
#
# Run only pattern learning tests:
#   pytest -m pattern_learning -v
#
# Run only quality intelligence tests:
#   pytest -m quality_intelligence -v
#
# Run only performance intelligence tests:
#   pytest -m performance_intelligence -v
#
# Run all Phase 5 tests:
#   pytest -m phase5 -v
#
# Exclude slow tests:
#   pytest -m "not slow" -v
#
# Run integration tests only:
#   pytest -m integration -v
#
# Run unit tests only:
#   pytest -m unit -v
#
# Combine markers (Phase 5 without slow tests):
#   pytest -m "phase5 and not slow" -v
#
# Integration tests for quality intelligence:
#   pytest -m "integration and quality_intelligence" -v

# Coverage options
[coverage:run]
source = src
omit =
    */tests/*
    */test_*.py
    */__pycache__/*

[coverage:report]
precision = 2
show_missing = True
skip_covered = False
