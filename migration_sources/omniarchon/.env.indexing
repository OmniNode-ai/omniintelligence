# Real-time Indexing Configuration for Archon
# This file contains environment variables for the real-time indexing pipeline
# Copy relevant variables to your main .env file

# =============================================================================
# CORE INDEXING SETTINGS
# =============================================================================

# Enable/disable automatic indexing of new documents
AUTO_INDEXING_ENABLED=true

# Enable/disable automatic refresh of vector indexes after indexing
AUTO_REFRESH_ENABLED=true

# Enable/disable PostgreSQL database triggers
DATABASE_TRIGGERS_ENABLED=true

# =============================================================================
# SERVICE URLS AND COMMUNICATION
# =============================================================================

# Intelligence service URL for document processing
INTELLIGENCE_SERVICE_URL=http://archon-intelligence:8053

# Search service URL for vectorization
SEARCH_SERVICE_URL=http://archon-search:8055

# Bridge service URL for knowledge graph sync
BRIDGE_SERVICE_URL=http://archon-bridge:8054

# =============================================================================
# INDEXING PERFORMANCE SETTINGS
# =============================================================================

# Maximum time to wait for indexing operations (seconds)
INDEXING_TIMEOUT=30

# Number of documents to process in a single batch
INDEXING_BATCH_SIZE=50

# Delay between batch processing operations (milliseconds)
INDEXING_BATCH_DELAY=100

# Maximum retry attempts for failed indexing operations
INDEXING_MAX_RETRIES=3

# Exponential backoff base delay for retries (milliseconds)
INDEXING_RETRY_DELAY=1000

# =============================================================================
# VECTOR DATABASE SETTINGS
# =============================================================================

# Qdrant vector database configuration
QDRANT_HOST=qdrant
QDRANT_PORT=6333
QDRANT_GRPC_PORT=6334
QDRANT_URL=http://qdrant:6333

# Vector embedding dimensions (1536 for OpenAI, 384 for sentence-transformers)
EMBEDDING_DIMENSIONS=1536

# Main collection name for document vectors
QDRANT_COLLECTION_NAME=archon_vectors

# Quality-weighted collection name
QDRANT_QUALITY_COLLECTION=quality_vectors

# Vector similarity threshold for searches
VECTOR_SIMILARITY_THRESHOLD=0.7

# =============================================================================
# KNOWLEDGE GRAPH SETTINGS
# =============================================================================

# Memgraph database configuration
MEMGRAPH_URI=bolt://memgraph:7687
MEMGRAPH_HTTP_PORT=7444

# Entity confidence threshold for knowledge graph storage
ENTITY_CONFIDENCE_THRESHOLD=0.6

# Maximum entities to extract per document
MAX_ENTITIES_PER_DOCUMENT=100

# =============================================================================
# DATABASE WEBHOOK SETTINGS
# =============================================================================

# Enable/disable database webhook processing
WEBHOOKS_ENABLED=true

# Webhook authentication token (set a secure random value)
WEBHOOK_AUTH_TOKEN=your_secure_webhook_token_here

# Maximum webhook payload size (bytes)
WEBHOOK_MAX_PAYLOAD_SIZE=1048576

# Webhook timeout (seconds)
WEBHOOK_TIMEOUT=10

# =============================================================================
# MONITORING AND OBSERVABILITY
# =============================================================================

# Enable/disable performance metrics collection
METRICS_ENABLED=true

# Enable/disable detailed indexing logs
INDEXING_LOGS_DETAILED=false

# Enable/disable pipeline health monitoring
HEALTH_MONITORING_ENABLED=true

# Health check interval (seconds)
HEALTH_CHECK_INTERVAL=60

# =============================================================================
# ERROR HANDLING AND RELIABILITY
# =============================================================================

# Enable/disable graceful degradation when services are unavailable
GRACEFUL_DEGRADATION=true

# Enable/disable dead letter queue for failed operations
DEAD_LETTER_QUEUE_ENABLED=true

# Maximum items in dead letter queue before cleanup
DLQ_MAX_SIZE=1000

# Circuit breaker failure threshold
CIRCUIT_BREAKER_THRESHOLD=5

# Circuit breaker timeout (milliseconds)
CIRCUIT_BREAKER_TIMEOUT=30000

# =============================================================================
# QUALITY AND COMPLIANCE SETTINGS
# =============================================================================

# Enable/disable ONEX compliance scoring
ONEX_COMPLIANCE_ENABLED=true

# Minimum quality score for indexing (0.0-1.0)
MIN_QUALITY_SCORE=0.3

# Enable/disable content validation before indexing
CONTENT_VALIDATION_ENABLED=true

# Maximum document size for indexing (bytes)
MAX_DOCUMENT_SIZE=10485760

# =============================================================================
# CACHING AND OPTIMIZATION
# =============================================================================

# Enable/disable vector cache
VECTOR_CACHE_ENABLED=true

# Vector cache TTL (seconds)
VECTOR_CACHE_TTL=3600

# Enable/disable embedding cache
EMBEDDING_CACHE_ENABLED=true

# Embedding cache size (number of embeddings)
EMBEDDING_CACHE_SIZE=10000

# Enable/disable index optimization
INDEX_OPTIMIZATION_ENABLED=true

# Index optimization interval (minutes)
INDEX_OPTIMIZATION_INTERVAL=60

# =============================================================================
# DEVELOPMENT AND TESTING
# =============================================================================

# Enable/disable development mode features
DEV_MODE=false

# Enable/disable mock services for testing
MOCK_SERVICES=false

# Enable/disable test data generation
GENERATE_TEST_DATA=false

# Test document count for load testing
TEST_DOCUMENT_COUNT=100

# =============================================================================
# LEGACY COMPATIBILITY
# =============================================================================

# Support for legacy document formats
LEGACY_FORMAT_SUPPORT=true

# Enable/disable automatic format migration
AUTO_FORMAT_MIGRATION=true

# =============================================================================
# USAGE EXAMPLES
# =============================================================================

# For production deployment:
# AUTO_INDEXING_ENABLED=true
# AUTO_REFRESH_ENABLED=true
# DATABASE_TRIGGERS_ENABLED=true
# INDEXING_TIMEOUT=30
# GRACEFUL_DEGRADATION=true

# For development/testing:
# AUTO_INDEXING_ENABLED=true
# AUTO_REFRESH_ENABLED=false
# DATABASE_TRIGGERS_ENABLED=false
# DEV_MODE=true
# MOCK_SERVICES=true

# For high-performance production:
# INDEXING_BATCH_SIZE=100
# INDEXING_BATCH_DELAY=50
# VECTOR_CACHE_ENABLED=true
# INDEX_OPTIMIZATION_ENABLED=true
# EMBEDDING_CACHE_SIZE=50000
