name: intelligence_orchestrator
version:
  major: 1
  minor: 0
  patch: 0

description: |
  Unified orchestrator for all intelligence operations using Llama Index workflows.
  Handles document ingestion, pattern learning, and quality assessment workflows.
  Routes operations via EnumOperationType.

node_type: orchestrator
base_class: NodeOmniAgentOrchestrator

# Subcontracts for different operation categories
subcontracts:
  processing: ./subcontracts/processing.yaml
  management: ./subcontracts/management.yaml
  monitoring: ./subcontracts/monitoring.yaml

# Input/Output models
input_model:
  name: ModelOrchestratorInput
  fields:
    operation_type:
      type: EnumOperationType
      required: true
      description: Type of operation to orchestrate (DOCUMENT_INGESTION, PATTERN_LEARNING, QUALITY_ASSESSMENT, etc.)

    entity_id:
      type: str
      required: true
      description: Unique identifier for the entity being processed

    payload:
      type: dict
      required: true
      description: Operation-specific payload data

    context:
      type: dict
      required: false
      description: Additional context for the operation

    correlation_id:
      type: str
      required: true
      description: Correlation ID for tracing across services

output_model:
  name: ModelOrchestratorOutput
  fields:
    success:
      type: bool
      required: true
      description: Whether the orchestration completed successfully

    workflow_id:
      type: str
      required: true
      description: Unique identifier for this workflow execution

    results:
      type: dict
      required: false
      description: Results from the workflow execution

    intents:
      type: list[ModelIntent]
      required: false
      description: Intents emitted during workflow execution

    errors:
      type: list[str]
      required: false
      description: Any errors encountered during execution

# Configuration
config_model:
  name: ModelOrchestratorConfig
  fields:
    max_concurrent_workflows:
      type: int
      default: 10
      description: Maximum number of concurrent workflows

    workflow_timeout_seconds:
      type: int
      default: 300
      description: Timeout for workflow execution

    enable_caching:
      type: bool
      default: true
      description: Enable result caching

    cache_ttl_seconds:
      type: int
      default: 300
      description: Cache TTL in seconds

# Workflow definitions (Llama Index workflows)
workflows:
  document_ingestion: ./workflows/document_ingestion.yaml
  pattern_learning: ./workflows/pattern_learning.yaml
  quality_assessment: ./workflows/quality_assessment.yaml
  semantic_analysis: ./workflows/semantic_analysis.yaml
  relationship_detection: ./workflows/relationship_detection.yaml

# Dependencies
dependencies:
  compute_nodes:
    - vectorization_compute
    - entity_extraction_compute
    - pattern_matching_compute
    - quality_scoring_compute
    - semantic_analysis_compute
    - relationship_detection_compute

  effect_nodes:
    - kafka_event_effect
    - qdrant_vector_effect
    - memgraph_graph_effect
    - postgres_pattern_effect
    - intelligence_api_effect

  reducers:
    - intelligence_reducer

# Metadata
metadata:
  author: omniintelligence
  created_at: "2025-11-14"
  tags:
    - orchestrator
    - intelligence
    - workflows
    - llama-index
  documentation: ../README.md
