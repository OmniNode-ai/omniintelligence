# ONEX Effect Contract - Memgraph Graph Effect
# Migrated to strict ONEX schema

name: memgraph_graph_effect
version:
  major: 1
  minor: 0
  patch: 0

description: |
  Effect node for managing knowledge graph in Memgraph.
  Handles entities, relationships, and graph queries for code intelligence.

node_type: effect

# Fully qualified model class names
input_model: omniintelligence._legacy.nodes.memgraph_graph_effect.v1_0_0.effect.ModelMemgraphGraphInput
output_model: omniintelligence._legacy.nodes.memgraph_graph_effect.v1_0_0.effect.ModelMemgraphGraphOutput

# I/O operations (required for effect nodes)
io_operations:
  - operation_type: graph_write
    atomic: true
    backup_enabled: false
    timeout_seconds: 30
    validation_enabled: true

  - operation_type: graph_query
    atomic: false
    backup_enabled: false
    timeout_seconds: 30
    validation_enabled: true

  - operation_type: graph_delete
    atomic: true
    backup_enabled: true
    timeout_seconds: 30
    validation_enabled: true

# Transaction management
transaction_management:
  enabled: true
  isolation_level: read_committed

# Retry policies
retry_policies:
  max_attempts: 5
  circuit_breaker_enabled: true
  circuit_breaker_threshold: 5

# Dependencies
# NOTE: ProtocolGraphDatabaseHandler is pending implementation (see MVP_PROPOSED_WORK_ISSUES.md Issue 4.3)
# Uncomment when ProtocolGraphDatabaseHandler is available in omnibase_spi
dependencies: []
  # - name: ProtocolGraphDatabase
  #   dependency_type: protocol
  #   required: true
  #   description: Memgraph graph database service

# Author and tags
author: omniintelligence
tags:
  - effect
  - memgraph
  - graph-database
  - knowledge-graph
  - cypher
