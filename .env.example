# =============================================================================
# OmniIntelligence Environment Configuration
# =============================================================================
#
# QUICK START:
# 1. Copy this file to .env:  cp .env.example .env
# 2. Set OMNIINTELLIGENCE_DB_URL in your .env (see PostgreSQL section below).
#    Default: localhost:5436 (local Docker via omnibase_infra).
#    Obtain the password from your team lead or secure credential storage.
# 3. Run tests: pytest tests/integration -m integration -v
#
# IMPORTANT: The .env file contains secrets and should NEVER be committed.
#            It is already in .gitignore.
#
# =============================================================================

# =============================================================================
# PostgreSQL Database Configuration
# =============================================================================
# Single connection URL for the OmniIntelligence database.
# Host options:
#   - Local Docker (default): localhost:5436 (omnibase_infra external port)
#   - Docker internal:         postgres:5432  (for services on omnibase-infra-network)
#
# REQUIRED: Replace <password> with the actual PostgreSQL password.
# Contact your team lead or check secure credential storage.
# DO NOT commit credentials to version control.
OMNIINTELLIGENCE_DB_URL=postgresql://postgres:<password>@localhost:5436/omniintelligence

# Connection pool settings (optional, sensible defaults provided)
POSTGRES_MIN_POOL_SIZE=2
POSTGRES_MAX_POOL_SIZE=10

# Command timeout in seconds for database operations (optional).
# Read by plugin.py and tests/integration/conftest.py with a default of 60.0.
# POSTGRES_COMMAND_TIMEOUT=60.0

# =============================================================================
# Kafka/Redpanda Event Bus Configuration
# =============================================================================
# Kafka/Redpanda broker address.
# Port 29092 is the EXTERNAL port for host machine access.
# Docker services use port 9092 via the internal hostname.
#
# IMPORTANT: Use different configurations depending on context:
#   - Host scripts/tests: localhost:29092 (external port)
#   - Docker services: omnibase-infra-redpanda:9092 (internal port via DNS)

KAFKA_BOOTSTRAP_SERVERS=localhost:29092
KAFKA_REQUEST_TIMEOUT_MS=30000
KAFKA_MAX_BLOCK_MS=10000

# =============================================================================
# Qdrant Vector Database Configuration (Optional)
# =============================================================================
# Used for vector search and embeddings storage.
# Typically runs locally on the development machine.

QDRANT_HOST=localhost
QDRANT_PORT=6333
QDRANT_URL=http://localhost:6333

# =============================================================================
# AI/ML API Keys (Optional)
# =============================================================================
# Required for intelligence operations that call external AI services.

OPENAI_API_KEY=

# =============================================================================
# LLM Endpoints
# =============================================================================
# LLM inference endpoints. Override with the addresses appropriate for your
# deployment environment.

LLM_CODER_URL=http://localhost:8000
LLM_EMBEDDING_URL=http://localhost:8002
LLM_QWEN_72B_URL=http://localhost:8100

# =============================================================================
# Feature Flags (Optional)
# =============================================================================

# Allow Kafka producers/consumers to use default configuration when
# bootstrap servers are not explicitly configured.
OMNIINTELLIGENCE_ALLOW_DEFAULT_KAFKA=true

# Shared Kafka consumer group ID for all intelligence topic consumers (OMN-2439).
# All runtime containers (omninode-runtime, omninode-runtime-effects, runtime-worker-*)
# must use the same group so Kafka load-balances partitions across the group rather
# than delivering each message to every container independently.
# Defaults to "omniintelligence-hooks" when unset or empty.
# Must not contain whitespace characters.
# OMNIINTELLIGENCE_CONSUMER_GROUP=omniintelligence-hooks

# Enable real-time event publishing for intelligence operations.
ENABLE_REAL_TIME_EVENTS=true

# Enable Kafka-based intelligence operations.
KAFKA_ENABLE_INTELLIGENCE=true

# =============================================================================
# Development/Test Settings
# =============================================================================

# Log level for debugging
LOG_LEVEL=INFO

# Enable verbose test output
PYTEST_ADDOPTS=-v --tb=short
